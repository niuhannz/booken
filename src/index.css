@tailwind base;
@tailwind components;
@tailwind utilities;

/* ─── Theme Variables ─── */

:root {
  /* Backgrounds */
  --bk-bg: #08080d;
  --bk-bg-elevated: #0c0c12;
  --bk-surface: rgba(255, 255, 255, 0.03);
  --bk-surface-strong: rgba(255, 255, 255, 0.05);
  --bk-surface-input: rgba(255, 255, 255, 0.04);
  --bk-surface-hover: rgba(255, 255, 255, 0.06);

  /* Text */
  --bk-text: #e8e4df;
  --bk-text-secondary: #8a8490;
  --bk-text-muted: #5a5560;
  --bk-text-quote: #a89d95;
  --bk-text-inverse: #08080d;
  --bk-text-heading: #ffffff;
  --bk-text-on-accent: #08080d;

  /* Accent */
  --bk-accent: #c4956a;
  --bk-accent-dark: #a87d54;
  --bk-accent-hover: #b8854f;
  --bk-accent-bg: rgba(196, 149, 106, 0.12);
  --bk-accent-bg-subtle: rgba(196, 149, 106, 0.08);
  --bk-accent-border: rgba(196, 149, 106, 0.2);
  --bk-accent-border-strong: rgba(196, 149, 106, 0.35);

  /* Borders */
  --bk-border: rgba(255, 255, 255, 0.06);
  --bk-border-strong: rgba(255, 255, 255, 0.08);
  --bk-border-hover: rgba(255, 255, 255, 0.12);

  /* Shadows & Glows */
  --bk-shadow: rgba(0, 0, 0, 0.3);
  --bk-shadow-accent: rgba(196, 149, 106, 0.2);
  --bk-shadow-accent-strong: rgba(196, 149, 106, 0.35);
  --bk-glow-subtle: rgba(196, 149, 106, 0.08);
  --bk-glow-medium: rgba(196, 149, 106, 0.2);
  --bk-glow-bar: rgba(196, 149, 106, 0.6);
  --bk-inset-glow: rgba(255, 255, 255, 0.04);

  /* UI elements */
  --bk-scrollbar: rgba(255, 255, 255, 0.08);
  --bk-scrollbar-hover: rgba(255, 255, 255, 0.14);
  --bk-canvas: #1a1815;
  --bk-page: #e8e4de;

  /* Errors */
  --bk-error: #ff6b7a;
  --bk-error-bg: rgba(220, 80, 100, 0.08);
  --bk-error-border: rgba(220, 80, 100, 0.3);
  --bk-delete: #e05252;
  --bk-delete-bg: rgba(224, 82, 82, 0.08);
  --bk-delete-border: rgba(224, 82, 82, 0.3);

  /* Aurora (dark nebula) */
  --bk-aurora-1: rgba(30, 15, 50, 0.8);
  --bk-aurora-2: rgba(15, 30, 40, 0.6);
  --bk-aurora-3: rgba(30, 20, 12, 0.7);

  /* Login-specific aurora */
  --bk-login-aurora: radial-gradient(ellipse 180% 120% at 50% 0%,
    rgba(100, 150, 255, 0.15) 0%,
    rgba(150, 100, 200, 0.1) 25%,
    rgba(200, 80, 150, 0.08) 50%,
    rgba(50, 100, 150, 0.05) 75%,
    transparent 100%);

  /* Login-specific surface overrides */
  --bk-login-surface: rgba(14, 12, 20, 0.7);
  --bk-login-input: rgba(30, 25, 40, 0.6);
  --bk-login-input-focus: rgba(40, 35, 50, 0.8);

  /* Noise overlay */
  --bk-noise-opacity: 0.012;

  /* Bookshelf overrides */
  --bk-card-surface: rgba(17, 17, 24, 0.4);
  --bk-card-surface-strong: rgba(17, 17, 24, 0.5);
  --bk-card-surface-hover: rgba(17, 17, 24, 0.6);
  --bk-card-border: rgba(200, 200, 208, 0.1);
  --bk-card-border-strong: rgba(200, 200, 208, 0.12);

  /* Pricing overrides */
  --bk-pricing-surface: rgba(232, 228, 223, 0.04);
  --bk-pricing-surface-strong: rgba(232, 228, 223, 0.08);
  --bk-pricing-border: rgba(232, 228, 223, 0.08);
  --bk-pricing-border-strong: rgba(232, 228, 223, 0.15);
  --bk-pricing-disabled: #6a6270;

  /* Nav */
  --bk-nav-text: rgba(255, 255, 255, 0.5);
  --bk-nav-text-hover: rgba(255, 255, 255, 0.75);
  --bk-nav-text-active: #ffffff;
  --bk-nav-user: rgba(255, 255, 255, 0.65);

  /* Tailwind shadcn base */
  --background: 240 10% 4%;
  --foreground: 30 10% 90%;
  --card: 240 8% 7%;
  --card-foreground: 30 10% 90%;
  --popover: 240 8% 7%;
  --popover-foreground: 30 10% 90%;
  --primary: 30 10% 90%;
  --primary-foreground: 240 10% 4%;
  --secondary: 240 6% 12%;
  --secondary-foreground: 30 10% 90%;
  --muted: 240 6% 12%;
  --muted-foreground: 260 6% 50%;
  --accent: 240 6% 12%;
  --accent-foreground: 30 10% 90%;
  --destructive: 0 62.8% 50%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 6% 14%;
  --input: 240 6% 14%;
  --ring: 30 42% 58%;
  --radius: 0.75rem;
}

/* ─── Light Theme ─── */

[data-theme="light"] {
  /* Backgrounds */
  --bk-bg: #f5f2ed;
  --bk-bg-elevated: #eae6e0;
  --bk-surface: rgba(255, 255, 255, 0.7);
  --bk-surface-strong: rgba(255, 255, 255, 0.85);
  --bk-surface-input: rgba(255, 255, 255, 0.7);
  --bk-surface-hover: rgba(255, 255, 255, 0.9);

  /* Text */
  --bk-text: #2a2535;
  --bk-text-secondary: #5a5570;
  --bk-text-muted: #8a8490;
  --bk-text-quote: #6a6570;
  --bk-text-inverse: #ffffff;
  --bk-text-heading: #1a1528;
  --bk-text-on-accent: #ffffff;

  /* Accent */
  --bk-accent: #b0804a;
  --bk-accent-dark: #9c6f3c;
  --bk-accent-hover: #a07040;
  --bk-accent-bg: rgba(176, 128, 74, 0.1);
  --bk-accent-bg-subtle: rgba(176, 128, 74, 0.06);
  --bk-accent-border: rgba(176, 128, 74, 0.25);
  --bk-accent-border-strong: rgba(176, 128, 74, 0.4);

  /* Borders */
  --bk-border: rgba(0, 0, 0, 0.08);
  --bk-border-strong: rgba(0, 0, 0, 0.12);
  --bk-border-hover: rgba(0, 0, 0, 0.18);

  /* Shadows & Glows */
  --bk-shadow: rgba(0, 0, 0, 0.06);
  --bk-shadow-accent: rgba(176, 128, 74, 0.15);
  --bk-shadow-accent-strong: rgba(176, 128, 74, 0.25);
  --bk-glow-subtle: rgba(176, 128, 74, 0.06);
  --bk-glow-medium: rgba(176, 128, 74, 0.12);
  --bk-glow-bar: rgba(176, 128, 74, 0.4);
  --bk-inset-glow: rgba(255, 255, 255, 0.5);

  /* UI elements */
  --bk-scrollbar: rgba(0, 0, 0, 0.1);
  --bk-scrollbar-hover: rgba(0, 0, 0, 0.18);
  --bk-canvas: #e5e0d8;
  --bk-page: #fffdf8;

  /* Errors */
  --bk-error: #dc3545;
  --bk-error-bg: rgba(220, 53, 69, 0.06);
  --bk-error-border: rgba(220, 53, 69, 0.2);
  --bk-delete: #dc3545;
  --bk-delete-bg: rgba(220, 53, 69, 0.06);
  --bk-delete-border: rgba(220, 53, 69, 0.2);

  /* Aurora (warm sunlit) */
  --bk-aurora-1: rgba(255, 220, 180, 0.15);
  --bk-aurora-2: rgba(200, 180, 220, 0.1);
  --bk-aurora-3: rgba(180, 210, 200, 0.12);

  /* Login-specific aurora */
  --bk-login-aurora: radial-gradient(ellipse 180% 120% at 50% 0%,
    rgba(200, 170, 130, 0.2) 0%,
    rgba(180, 160, 200, 0.12) 25%,
    rgba(200, 180, 160, 0.08) 50%,
    rgba(160, 180, 200, 0.05) 75%,
    transparent 100%);

  /* Login-specific surface overrides */
  --bk-login-surface: rgba(255, 255, 255, 0.8);
  --bk-login-input: rgba(245, 242, 237, 0.7);
  --bk-login-input-focus: rgba(255, 255, 255, 0.9);

  /* Noise overlay */
  --bk-noise-opacity: 0.02;

  /* Bookshelf overrides */
  --bk-card-surface: rgba(255, 255, 255, 0.6);
  --bk-card-surface-strong: rgba(255, 255, 255, 0.7);
  --bk-card-surface-hover: rgba(255, 255, 255, 0.85);
  --bk-card-border: rgba(0, 0, 0, 0.06);
  --bk-card-border-strong: rgba(0, 0, 0, 0.1);

  /* Pricing overrides */
  --bk-pricing-surface: rgba(255, 255, 255, 0.5);
  --bk-pricing-surface-strong: rgba(255, 255, 255, 0.7);
  --bk-pricing-border: rgba(0, 0, 0, 0.08);
  --bk-pricing-border-strong: rgba(0, 0, 0, 0.14);
  --bk-pricing-disabled: #a0a0a0;

  /* Nav */
  --bk-nav-text: rgba(42, 37, 53, 0.5);
  --bk-nav-text-hover: rgba(42, 37, 53, 0.75);
  --bk-nav-text-active: #1a1528;
  --bk-nav-user: rgba(42, 37, 53, 0.65);

  /* Tailwind shadcn base */
  --background: 30 15% 95%;
  --foreground: 260 15% 15%;
  --card: 30 12% 97%;
  --card-foreground: 260 15% 15%;
  --popover: 30 12% 97%;
  --popover-foreground: 260 15% 15%;
  --primary: 30 42% 50%;
  --primary-foreground: 0 0% 100%;
  --secondary: 30 8% 90%;
  --secondary-foreground: 260 15% 15%;
  --muted: 30 8% 90%;
  --muted-foreground: 260 6% 50%;
  --accent: 30 8% 90%;
  --accent-foreground: 260 15% 15%;
  --destructive: 0 62.8% 50%;
  --destructive-foreground: 0 0% 98%;
  --border: 30 8% 86%;
  --input: 30 8% 86%;
  --ring: 30 42% 50%;
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    background: var(--bk-bg);
    color: var(--bk-text);
    font-family: 'Spectral', serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background 0.4s ease, color 0.4s ease;
  }
}

/* ─── Glass Morphism System ─── */

.bk-glass {
  background: var(--bk-surface);
  backdrop-filter: blur(24px) saturate(1.2);
  -webkit-backdrop-filter: blur(24px) saturate(1.2);
  border: 1px solid var(--bk-border);
}

[data-theme="light"] .bk-glass {
  box-shadow: 0 1px 3px var(--bk-shadow), 0 0 0 1px var(--bk-border);
}

.bk-glass-strong {
  background: var(--bk-surface-strong);
  backdrop-filter: blur(40px) saturate(1.4);
  -webkit-backdrop-filter: blur(40px) saturate(1.4);
  border: 1px solid var(--bk-border-strong);
}

[data-theme="light"] .bk-glass-strong {
  box-shadow: 0 2px 8px var(--bk-shadow), 0 0 0 1px var(--bk-border);
}

.bk-glass-input {
  background: var(--bk-surface-input);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid var(--bk-border-strong);
  color: var(--bk-text);
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.bk-glass-input:focus {
  border-color: var(--bk-accent-border-strong);
  box-shadow: 0 0 0 2px rgba(196, 149, 106, 0.1), 0 0 20px rgba(196, 149, 106, 0.05);
  background: var(--bk-surface-hover);
  outline: none;
}

.bk-glass-input::placeholder {
  color: var(--bk-text-muted);
}

/* ─── Aurora Background ─── */

.bk-aurora {
  position: relative;
  overflow: hidden;
  background: var(--bk-bg);
}

.bk-aurora::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background:
    radial-gradient(ellipse at 25% 40%, var(--bk-aurora-1) 0%, transparent 50%),
    radial-gradient(ellipse at 75% 25%, var(--bk-aurora-2) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 75%, var(--bk-aurora-3) 0%, transparent 50%);
  animation: bk-aurora-drift 25s ease-in-out infinite alternate;
  pointer-events: none;
  z-index: 0;
}

@keyframes bk-aurora-drift {
  0% { transform: translate(0%, 0%) rotate(0deg) scale(1); }
  33% { transform: translate(2%, -1%) rotate(0.5deg) scale(1.02); }
  66% { transform: translate(-1%, 2%) rotate(-0.3deg) scale(0.99); }
  100% { transform: translate(1%, -1.5%) rotate(0.2deg) scale(1.01); }
}

/* ─── Typography ─── */

.bk-display {
  font-family: 'Cormorant Garamond', serif;
  font-weight: 300;
  letter-spacing: 0.02em;
}

.bk-body {
  font-family: 'Spectral', serif;
  font-weight: 400;
}

.bk-ui {
  font-family: 'DM Sans', sans-serif;
  font-weight: 400;
  letter-spacing: 0.01em;
}

/* ─── Animations ─── */

@keyframes bk-fade-up {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes bk-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes bk-scale-in {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

.bk-animate-in {
  animation: bk-fade-up 0.7s cubic-bezier(0.16, 1, 0.3, 1) both;
}

.bk-stagger-1 { animation-delay: 0.06s; }
.bk-stagger-2 { animation-delay: 0.12s; }
.bk-stagger-3 { animation-delay: 0.18s; }
.bk-stagger-4 { animation-delay: 0.24s; }
.bk-stagger-5 { animation-delay: 0.3s; }

/* ─── Glow Effects ─── */

.bk-glow {
  box-shadow:
    0 0 40px var(--bk-glow-subtle),
    0 0 80px rgba(196, 149, 106, 0.03),
    inset 0 1px 0 var(--bk-inset-glow);
}

.bk-glow-accent {
  box-shadow:
    0 4px 24px var(--bk-glow-medium),
    0 0 60px rgba(196, 149, 106, 0.06);
}

/* ─── Noise Overlay ─── */

.bk-noise::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: var(--bk-noise-opacity);
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 9999;
}

/* ─── Scrollbar ─── */

::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--bk-scrollbar); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--bk-scrollbar-hover); }

/* ─── Button System ─── */

.bk-btn-accent {
  background: linear-gradient(135deg, var(--bk-accent) 0%, var(--bk-accent-dark) 100%);
  color: var(--bk-text-on-accent);
  font-family: 'DM Sans', sans-serif;
  font-weight: 500;
  font-size: 0.875rem;
  letter-spacing: 0.04em;
  border: none;
  border-radius: 10px;
  padding: 0.625rem 1.5rem;
  cursor: pointer;
  transition: all 0.35s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: 0 2px 16px var(--bk-shadow-accent), inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.bk-btn-accent:hover {
  box-shadow: 0 6px 32px var(--bk-shadow-accent-strong), inset 0 1px 0 rgba(255, 255, 255, 0.25);
  transform: translateY(-1px);
}

.bk-btn-accent:active {
  transform: translateY(0);
  box-shadow: 0 2px 12px rgba(196, 149, 106, 0.15);
}

.bk-btn-ghost {
  background: transparent;
  color: var(--bk-text-secondary);
  border: 1px solid var(--bk-border-strong);
  font-family: 'DM Sans', sans-serif;
  font-weight: 400;
  font-size: 0.875rem;
  border-radius: 10px;
  padding: 0.625rem 1.5rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.bk-btn-ghost:hover {
  background: var(--bk-surface-hover);
  color: var(--bk-text);
  border-color: var(--bk-border-hover);
}

/* ─── Decorative Divider ─── */

.bk-divider {
  width: 48px;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(196, 149, 106, 0.5), transparent);
  margin: 1rem auto;
}

/* ─── Card Hover ─── */

.bk-card-hover {
  transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.bk-card-hover:hover {
  border-color: var(--bk-accent-border);
  box-shadow: 0 8px 40px var(--bk-shadow), 0 0 30px rgba(196, 149, 106, 0.05);
  transform: translateY(-2px);
}

/* ─── Theme Toggle Button ─── */

.bk-theme-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 8px;
  border: 1px solid var(--bk-border);
  background: var(--bk-surface);
  color: var(--bk-text-secondary);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.bk-theme-toggle:hover {
  background: var(--bk-surface-hover);
  color: var(--bk-accent);
  border-color: var(--bk-accent-border);
}

/* ─── Smooth theme transition ─── */

*, *::before, *::after {
  transition-property: background-color, border-color, color, box-shadow;
  transition-duration: 0s;
}

[data-theme] *, [data-theme] *::before, [data-theme] *::after {
  transition-duration: 0.3s;
  transition-timing-function: ease;
}
